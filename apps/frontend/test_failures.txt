
> angular-admin-template@1.0.0 test
> jest src/app/features/schools/school-form/school-form.component.spec.ts src/app/core/services/school.service.spec.ts

FAIL src/app/features/schools/school-form/school-form.component.spec.ts
  ΓùÅ SchoolFormComponent ΓÇ║ should show validation error when name is empty

    expect(received).toBeTruthy()

    Received: null

      105 |         expect(nameControl?.hasError('required')).toBe(true);
      106 |         const errorElement = fixture.debugElement.query(By.css('.error-message'));
    > 107 |         expect(errorElement).toBeTruthy();
          |                              ^
      108 |     });
      109 |
      110 |     it('should show validation error for invalid email format', () => {

      at src/app/features/schools/school-form/school-form.component.spec.ts:107:30
      at _ZoneDelegate.invoke (node_modules/zone.js/bundles/zone.umd.js:410:32)
      at ProxyZoneSpec.onInvoke (node_modules/zone.js/bundles/zone-testing.umd.js:2219:43)
      at _ZoneDelegate.invoke (node_modules/zone.js/bundles/zone.umd.js:409:38)
      at ZoneImpl.run (node_modules/zone.js/bundles/zone.umd.js:145:47)
      at Object.wrappedFunc (node_modules/zone.js/bundles/zone-testing.umd.js:449:38)

  ΓùÅ SchoolFormComponent ΓÇ║ should call createSchool and show success on valid create submission

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
        "address": "456 Oak St",
    +   "address2": undefined,
    +   "afterschool1Contact": undefined,
    +   "afterschool1Name": undefined,
    +   "afterschool2Contact": undefined,
    +   "afterschool2Name": undefined,
    +   "circularsEmail": undefined,
    +   "contactCell": undefined,
        "contactPerson": "Jane Smith",
        "email": "new@example.com",
    +   "fax": undefined,
    +   "feeDescription": undefined,
    +   "formula": undefined,
    +   "headmaster": undefined,
    +   "headmasterCell": undefined,
    +   "importFlag": false,
    +   "kcowWebPageLink": undefined,
    +   "language": "Afr",
    +   "moneyMessage": undefined,
        "name": "New School",
        "phone": "987-654-3210",
    +   "price": undefined,
    +   "printInvoice": false,
    +   "safeNotes": undefined,
        "schedulingNotes": "New notes",
    +   "shortName": undefined,
    +   "telephone": undefined,
    +   "truckId": undefined,
    +   "visitDay": undefined,
    +   "visitSequence": undefined,
    +   "webPage": undefined,
      },

    Number of calls: 1

      162 |         fixture.detectChanges();
      163 |
    > 164 |         expect(mockSchoolService.createSchool).toHaveBeenCalledWith({
          |                                                ^
      165 |             name: 'New School',
      166 |             address: '456 Oak St',
      167 |             contactPerson: 'Jane Smith',

      at src/app/features/schools/school-form/school-form.component.spec.ts:164:48
      at _ZoneDelegate.invoke (node_modules/zone.js/bundles/zone.umd.js:410:32)
      at ProxyZoneSpec.onInvoke (node_modules/zone.js/bundles/zone-testing.umd.js:2219:43)
      at _ZoneDelegate.invoke (node_modules/zone.js/bundles/zone.umd.js:409:38)
      at ZoneImpl.run (node_modules/zone.js/bundles/zone.umd.js:145:47)
      at Object.wrappedFunc (node_modules/zone.js/bundles/zone-testing.umd.js:449:38)

FAIL src/app/core/services/school.service.spec.ts
  ΓùÅ Test suite failed to run

    src/app/core/services/school.service.spec.ts:12:9 - error TS2739: Type '{ id: number; name: string; isActive: true; }' is missing the following properties from type 'School': printInvoice, importFlag

    12         { id: 1, name: 'School A', isActive: true },
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    src/app/core/services/school.service.spec.ts:13:9 - error TS2739: Type '{ id: number; name: string; isActive: false; }' is missing the following properties from type 'School': printInvoice, importFlag

    13         { id: 2, name: 'School B', isActive: false },
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    src/app/core/services/school.service.spec.ts:70:15 - error TS2739: Type '{ id: number; name: string; address: string; isActive: true; }' is missing the following properties from type 'School': printInvoice, importFlag

    70         const school: School = {
                     ~~~~~~

Test Suites: 2 failed, 2 total
Tests:       2 failed, 8 passed, 10 total
Snapshots:   0 total
Time:        6.364 s
Ran all test suites matching src/app/features/schools/school-form/school-form.component.spec.ts|src/app/core/services/school.service.spec.ts.
